# PukiWikiEf
PukiWiki ファイル暗号化機能追加版

* PukiWiki に、ファイルを暗号化する機能を追加しました。
* PukiWiki 1.5.1 UTF8 版 をベースにしています。

## 目的
* ファイルを暗号化することで、ストレージの盗難や破棄時の情報漏洩を防ぎます。

## 暗号化される情報について
* ページの中身の情報が暗号化されます。ページのタイトル(./wiki/に保存されるファイル名)は暗号化されません。
* ページに添付したファイルが暗号化されます。が、こちらもファイル名は暗号化されません。
* ページの差分履歴が暗号化されます。

## 設定方法
* pukiwiki.ini.php にある $auth_users_encryptfile_password という変数に、ユーザー名と適切な設定を記述することで、そのユーザーが行う更新が暗号化される対象となります。詳しくは pukiwiki.ini.php を参照ください。

## 制限事項
* ファイルを暗号/復号する為のパスワードはユーザー毎に PHP Session で保持しており、PukiWiki の Form認証 に乗っかる形で実装しています。そのためファイル暗号化を有効にする場合は Form 認証も同時に有効にする必要があります。

## 注意事項
* OpenSSL を使っていますので、サーバー側がサポートしていることが必須です。
* 暗号/復号する為のパスワードは無くさないようにお願いします。
  * パスワードはどこにも保存されません。 pukiwiki.ini.php 内にもパスワードそのものは記載しません。
    * pukiwiki.ini.php 内にパスワードを記述してしまうことは可能ですが、暗号化の目的からすると推奨出来ません。
  * 通常の使い方であれば、ユーザーを追加する場合に必要になります。それ以外ではパスワードそのものが必要になることはありません。
* 暗号/復号する処理そのものはサーバー側で行われます。サーバー管理者側であれば情報を覗き見ることは技術的に不可能ではありません。


## refserverfiles プラグイン
* PukiWiki をファイルサーバーのように使う用途向けに、refserverfiles というプラグインも同梱しています。
* サーバー内のファイルを、PukiWiki からダウンロードさせることが出来ます。ファイルは暗号化した状態で置いておき、暗号を解いてダウンロードします。
* 使い道としては、PukiWiki の添付ではアップロード出来ないような巨大なファイルをページに載せたい場合を想定しています。

## ライセンス
* 本家 PukiWiki のライセンスに準じますので、そちらをご参照下さい。

## さいごに
* PukiWiki 便利に使わせて頂いております。開発者様に感謝です。

